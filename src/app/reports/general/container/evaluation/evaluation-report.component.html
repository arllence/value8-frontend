<style>
  .btn-success {
    color: #fff !important;
    background-color: #198754 !important;
    border-color: #198754 !important;
}
</style>





<div class="animated fadeIn" id="print">
    <div class="card">
      <div class="card-header">
        <strong>
           <span *ngIf="pending_report">
               Pending Reports
           </span>
           <span *ngIf="!pending_report">
            Evaluation Results
           </span>
           
         </strong>
      </div>
      <div class="card-body" >
        <form [formGroup]="searchForm" (ngSubmit)="filterAssigned()" *ngIf="!hide_filter_form" class="hide">
          <div class="row ">           
            <div class="form-group col-sm-6">
              <label for="searchby"><strong>Select Stage</strong></label>
              <select class="form-control" id="searchby" formControlName="role" required (change)="search_by($event.target.value)">
                <option value="EVALUATOR" selected>Evaluator</option>
                <option value="JURY">Jury</option>
                <option value="TOP50">Top 50</option>
              </select>
            </div>
            
            <div class="form-group col-sm-6">
              <label for="countr">&nbsp;&nbsp;</label>
              <button type="submit" class="btn form-control  btn-success btn-md "> <i
                  class="fa fa-search"></i> &nbsp;Search </button>
            </div>
         
          </div>
        </form>

         <div class="table-responsive ">
            <div *ngIf="records?.length !== 0" class="m-5 hide">
               <table class="wikitable hover" width="100%">
                  <tr>
                     <td class="pl-3"><b>TOTAL RECORDS</b></td>
                     <td class="pl-3"><b>{{records?.length}}</b></td>
                  </tr>
               </table>
            </div>              

            <div class="mb-2 table-responsive">
               <div class="col-sm-4 col-md-4 col-lg-4 float-right mb-2 hide">
                  <div class="input-group">
                     <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span></div>
                     <input class="form-control " placeholder="Search Here" type="text" [(ngModel)]="searchString">
                  </div>
               </div>

               <button class="btn  btn-warning float-right mb-2 hide" styleSheetFile="assets/css/custom_table.css" printSectionId="print" ngxPrint *ngIf="records?.length != 0">Export/Print</button>

               <table class="wikitable" [mfData]="records" #mf="mfDataTable"  [mfRowsOnPage]="10" width="100%" *ngIf="role !== 'JURY'">
               <thead>
               <tr>        
                  
                     <th>#</th>
                     <th>
                        <mfDefaultSorter by="innovator.first_name">Entrepreneur Name</mfDefaultSorter>
                     </th>
                     <th>
                        <mfDefaultSorter by="innovation.organization_name">Enterprise Name</mfDefaultSorter>
                     </th>
                     <th>
                        <mfDefaultSorter by="innovation.country">Country</mfDefaultSorter>
                     </th>
                     <th>
                        <mfDefaultSorter by="evaluator.first_name">Evaluator Name</mfDefaultSorter>
                     </th>
                     <th class="text-center">
                        <mfDefaultSorter by="total_score">Score</mfDefaultSorter>
                     </th>
                     <th *ngxPermissionsOnly="['SUPER_ADMIN','MANAGER']" class="hide">
                        Action
                     </th>
               </tr>
               </thead>
               <tbody *ngIf="records?.length != 0">
               <tr *ngFor="let recordinstance of mf.data | filter : searchString; let i = index">            
                  <td>{{i + 1}}</td>
                  <td>{{ recordinstance.innovator.first_name }} {{ recordinstance.innovator.last_name }}</td>
                  <td>{{ recordinstance.innovation.organization_name }}</td>
                  <td>{{ recordinstance.innovation.country }}</td>
                  <td>{{ recordinstance.evaluator.first_name }} {{ recordinstance.evaluator.last_name }}</td>
                  <td class="text-center">{{ recordinstance.total_score }}</td>
                  <td *ngxPermissionsOnly="['SUPER_ADMIN','MANAGER','SCREENER']" class="hide">
                     <button class="btn btn-info btn-small" (click)="application_review(recordinstance.innovator.id )">View</button>
                     <!-- <span  *ngxPermissionsOnly="['SUPER_ADMIN']">
                        <button class="btn btn-success btn-small mr-3" (click)="approve(recordinstance.innovation.id,'create')" *ngIf="!recordinstance.is_top_50"><i class="fa fa-check"></i>
                        </button>
                     </span> -->
                  </td>
               </tr>
               </tbody>
               <tfoot>
               <tr class="hide">
                  <td colspan="12">
                     Select Records in a page : <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,50,100,1000,5000]"></mfBootstrapPaginator>
                  </td>
               </tr>
               </tfoot>
               <tbody *ngIf="records?.length == 0">
               <tr>
                  <td colspan="9" class="no-data-available">No data available</td>
               </tr>
               <tbody>
               </table>

               <table class="wikitable" [mfData]="records" #mf="mfDataTable"  [mfRowsOnPage]="10" width="100%" *ngIf="role == 'JURY'">
                  <thead>
                  <tr>        
                     
                        <th class="text-center">#</th>
                        <th>
                           <mfDefaultSorter by="group">Group</mfDefaultSorter>
                        </th>
                        <th>
                           <mfDefaultSorter by="innovation.creator.first_name">Entrepreneur Name</mfDefaultSorter>
                        </th>
                        <th width="20%">
                           <mfDefaultSorter by="innovation.organization_name">Enterprise Name</mfDefaultSorter>
                        </th>
                        <th class="text-center">
                           <mfDefaultSorter by="innovation.country">Country</mfDefaultSorter>
                        </th>
                        <th class="text-center">
                           <mfDefaultSorter by="innovation.creator.user_info.gender">Gender</mfDefaultSorter>
                        </th>
                        <th width="7%" class="text-center">
                           <mfDefaultSorter by="innovation.creator.user_info.dob">DOB</mfDefaultSorter>
                        </th>
                        <th class="text-center">
                           <mfDefaultSorter by="innovation.creator.user_info.age">Age</mfDefaultSorter>
                        </th>
                        <th class="text-center">
                           <mfDefaultSorter by="innovation.reviewer_score">Reviewer Score</mfDefaultSorter>
                        </th>
                        <th width="30%">
                           <mfDefaultSorter by="evaluator.name">Jurors</mfDefaultSorter>
                        </th>
                        <th class="text-center">
                           <mfDefaultSorter by="average">Average Jury Score</mfDefaultSorter>
                        </th>
                        <th *ngxPermissionsOnly="['SUPER_ADMIN','MANAGER']" class="hide">
                           Action
                        </th>
                  </tr>
                  </thead>
                  <tbody *ngIf="records?.length != 0">
                  <tr *ngFor="let recordinstance of mf.data | filter : searchString; let i = index">            
                     <td class="text-center">{{i + 1}}</td>
                     <td>
                        <span class="badge badge-warning" >
                           {{ recordinstance.group}}
                        </span>
                     </td>
                     <td>{{ recordinstance.innovation.creator.first_name }} {{ recordinstance.innovation.creator.last_name }}</td>
                     <td>{{ recordinstance.innovation.organization_name }}</td>
                     <td class="text-center">{{ recordinstance.innovation.country }}</td>
                     <td class="text-center">{{ recordinstance.innovation.creator.user_info.gender }}</td>
                     <td class="text-center">{{ recordinstance.innovation.creator.user_info.dob }}</td>
                     <td class="text-center">{{ recordinstance.innovation.creator.user_info.age }}</td>
                     <td class="text-center">{{ recordinstance.innovation.reviewer_score }}</td>
                     <td>
                        <table width="100%">
                           <thead>
                              <tr>
                                 <th width="80%">Name</th>
                                 <th class="text-right">Score</th>
                              </tr>
                           </thead>
                           <tr *ngFor="let evaluator of recordinstance.evaluators">
                              <td>{{evaluator?.name}}</td>
                              <td class="text-right">{{evaluator?.score}}</td>
                           </tr>
                        </table>
                     </td>
                     <td class="text-center">{{ recordinstance.average }}</td>
                     <td *ngxPermissionsOnly="['SUPER_ADMIN','MANAGER','SCREENER']" class="hide">
                        <button class="btn btn-info btn-small" (click)="application_review(recordinstance.innovation.creator.id )">View</button>
                        <!-- <span  *ngxPermissionsOnly="['SUPER_ADMIN']">
                           <button class="btn btn-success btn-small mr-3" (click)="approve(recordinstance.innovation.id,'create')" *ngIf="!recordinstance.is_top_50"><i class="fa fa-check"></i>
                           </button>
                        </span> -->
                     </td>
                  </tr>
                  </tbody>
                  <tfoot>
                  <tr class="hide">
                     <td colspan="12">
                        Select Records in a page : <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,50,100,1000,5000]"></mfBootstrapPaginator>
                     </td>
                  </tr>
                  </tfoot>
                  <tbody *ngIf="records?.length == 0">
                  <tr>
                     <td colspan="9" class="no-data-available">No data available</td>
                  </tr>
                  <tbody>
                  </table>
         </div>        
      </div>
    </div>
</div>
  

<div bsModal #createModal="bs-modal" class="modal fade hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-success" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Assigned Innovations</h4>
        <button type="button" class="close" (click)="createModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body table-responsive">
         <table class="wikitable" width="100%">
            <tr>
               <th></th>
               <th>Innovation Name</th>
               <th>Entreprenuer</th>
               <th>Country</th>
               <th  class="text-center">Score</th>
               <th>Action</th>
            </tr>
            <tr *ngFor="let data of assigned; let i = index">
               <td>{{i+1}}</td>
               <td>{{data?.innovation?.organization_name}}</td>
               <td>{{data?.innovation?.creator?.first_name}} {{data?.creator?.last_name}}</td>
               <td>{{data?.innovation?.country}}</td>
               <td class="text-center">
                  <span *ngIf="role == 'EVALUATOR'">
                     {{data?.innovation?.total_score}}
                  </span>
                  <span *ngIf="role == 'JURY'">
                     {{data?.innovation?.jury_total_score}}
                  </span>
               </td>
               <td>
                  <button class="btn btn-warning btn-small" (click)="application_review(data?.innovation?.creator?.id)">View</button>
               </td>

            </tr>
         </table>

      </div>
      
      <div class="modal-footer">
        <button   class="btn btn-secondary col-sm-12" (click)="createModal.hide()">Cose</button>      
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->