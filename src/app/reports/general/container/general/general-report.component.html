<style>
  .btn-success {
    color: #fff !important;
    background-color: #198754 !important;
    border-color: #198754 !important;
}
</style>

<div class="animated fadeIn" *ngxPermissionsOnly="['MANAGER','SCREENER']">
  <div class="card" *ngIf="!hide_filter_form">
    <div class="card-header">
      <strong>General Submissions Analytics</strong>&nbsp;&nbsp; (<small class="pointer bg-info rounded" (click)="gsa_toggler()">&nbsp;{{gsa_toggler_name}}&nbsp;</small>)
    </div>
    <div class="card-body" *ngIf="gsa_toggler_status">
      <section class="content indexpage evaluator mb-5">
        <div class="row">
           <div class="mb-3 col-lg-6 col-xl-3 col-md-6 col-sm-6 margin_10 animated fadeInRightBig pointer">
              <!-- Trans label pie charts strats here-->
              <div class="palebluecolorbg bg-success text-white no-radius">
                 <div class="card-body squarebox square_boxs cardpaddng">
                    <div class="row">
                       <div class="col-12 float-left nopadmar">
                          <div class="row">
                             <div class="square_box col-8 float-left">
                                <span>Completed</span>
                                
                             </div>
                             <div class="col-4">
                                <div class="number" id="myTargetElement4">
                                   {{general_analytics?.submitted}}
                                </div>
                             </div>
                          </div>
                       </div>
                    </div>
                 </div>
              </div>
           </div>
           <div class="mb-3 col-lg-6 col-xl-3 col-md-6 col-sm-6 margin_10 animated fadeInRightBig pointer" (click)="assigned()" disabled>
               <div class="palebluecolorbg bg-primary text-white no-radius">
                  <div class="card-body squarebox square_boxs cardpaddng">
                     <div class="row">
                        <div class="col-12 float-left nopadmar">
                           <div class="row">
                              <div class="square_box col-8 float-left">
                                 <span>Recommended</span>
                                 
                              </div>
                              <div class="col-4">
                                 <div class="number" id="myTargetElement4">
                                    {{general_analytics?.approved}}
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="mb-3 col-lg-6 col-xl-3 col-md-6 col-sm-6 margin_10 animated fadeInRightBig pointer" (click)="assigned()" disabled>
               <!-- Trans label pie charts strats here-->
               <div class="palebluecolorbg bg-warning text-dark no-radius">
                  <div class="card-body squarebox square_boxs cardpaddng">
                     <div class="row">
                        <div class="col-12 float-left nopadmar">
                           <div class="row">
                              <div class="square_box col-8 float-left">
                                 <span>Pending Screening</span>
                                 
                              </div>
                              <div class="col-4">
                                 <div class="number" id="myTargetElement4">
                                    {{general_analytics?.unscreened}}
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
           </div>
           <div class="mb-3 col-lg-6 col-xl-3 col-md-6 col-sm-6 margin_10 animated fadeInUpBig">
            <!-- Trans label pie charts strats here-->
            <div class="redbg no-radius">
               <div class="card-body bg_purple text-white squarebox square_boxs cardpaddng">
                  <div class="row">
                     <div class="col-12 float-left nopadmar">
                        <div class="row">
                           <div class="square_box col-8 float-left">
                              <span>Evaluated</span>
                              
                           </div>
                           <div class="col-4">
                              <div class="number" id="myTargetElement2">
                                {{general_analytics?.screened}}
                              </div>
                            </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
           <div class="mb-3 col-lg-6 col-xl-3 col-md-6 col-sm-6 margin_10 animated fadeInUpBig">
            <!-- Trans label pie charts strats here-->
            <div class="redbg no-radius">
               <div class="card-body bg-danger text-white squarebox square_boxs cardpaddng">
                  <div class="row">
                     <div class="col-12 float-left nopadmar">
                        <div class="row">
                           <div class="square_box col-8 float-left">
                              <span>Dropped</span>
                              
                           </div>
                           <div class="col-4">
                              <div class="number" id="myTargetElement2">
                                {{general_analytics?.dropped}}
                              </div>
                            </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
        </div>
       </section>

    </div>
  </div>
</div>



<div class="animated fadeIn">
    <div class="card">
      <div class="card-header">
        <strong>
           <span *ngIf="pending_report">
               Pending Reports
           </span>
           <span *ngIf="!pending_report">
            Filter Submissions Analytics
           </span>
           
         </strong>
      </div>
      <div class="card-body" id="print">
        <form [formGroup]="searchForm" (ngSubmit)="filterinnovations()" *ngIf="!hide_filter_form" class="hide">
          <div class="row ">           
            <div class="form-group col-sm-2">
              <label for="searchby"><strong>Status</strong></label>
              <select class="form-control" id="searchby" formControlName="status" required (change)="status_change($event.target.value)">
                <option value="ALL" selected>All</option>
                <option value="RECOMMENDED">Recommended</option>
                <option value="SUBMITTED">Completed</option>
                <option value="VALIDATED">Evaluated</option>
                <option value="ONGOING">Incomplete</option>
                <option value="UNDER_REVIEW">Under Review</option>                
                <option value="DROPPED">Dropped</option>
              </select>
            </div>
            <div class="form-group col-sm-2">
              <label for="stage"><strong>Stage</strong></label>
              <select class="form-control" id="stage" formControlName="stage" required>
                <option value="ALL" selected>All</option>
                <option value="I">I</option>
                <option value="II">II</option>
              </select>
            </div>
            <div class="form-group col-sm-2">
               <label for="stage"><strong>Language</strong></label>
               <select class="form-control" id="language" formControlName="language" required>
                 <option value="ALL" selected>All</option>
                 <option value="English,Anglais">English</option>
                 <option value="French,Français,Français/">French</option>
                 <option value="Portuguese,Portugais">Portuguese</option>
               </select>
             </div>
             <div class="col-sm-2 form-group">
               <label for="age_group" class="control-label"> <strong>Age Group</strong></label>
               <select required formControlName="age" id="age_group" class="form-control" required>
                  <option value="ALL" selected>All</option>
                  <option  value="" disabled>----New Age Group-----</option>
                  <option  value="18-25">18 - 25 Years</option>
                  <option  value="26-35">26 - 35 Years</option>
                  <option  value="36-45">36 - 45 Years</option>
                  <option  value="46-55">46 - 55 Years</option>
                  <option  value="Above 56">Above 56 Years</option>
                  <option  value="" disabled>----Old Age Group-----</option>
                  <option  value="18-24">18 - 24 Years</option>
                  <option  value="25-34">25 - 34 Years</option>
                  <option  value="35-44">35 - 44 Years</option>
                  <option  value="45-54">44 - 54 Years</option>
                  <option  value="Above 55">Above 55 Years</option> 
               </select>
            </div>
            <div class="form-group col-sm-2">
               <label for="country"><strong>Country</strong></label>
               <ng-select id="country" class="required" formControlName="country" >
                 <ng-option selected value="ALL">ALL</ng-option>
                   <ng-option [value]="country.name" *ngFor="let country of countries">{{country.name}}</ng-option>
                 </ng-select>  
             </div>
            <div class="form-group col-sm-2">
              <label for="countr">&nbsp;&nbsp;</label>
              <button type="submit" class="btn form-control  btn-success btn-md "> <i
                  class="fa fa-search"></i> &nbsp;Search </button>
            </div>
         
          </div>
        </form>

         <div class="table-responsive">
            <div *ngIf="records?.length !== 0" class="m-5">
               <table class="wikitable hover" width="100%">
                  <tr>
                     <td class="pl-3"><b>TOTAL RECORDS</b></td>
                     <td class="pl-3"><b>{{records?.length}}</b></td>
                  </tr>
               </table>
            </div>              

            <div class="mb-2">
               <div class="col-sm-4 col-md-4 col-lg-4 float-right mb-2 hide">
                  <div class="input-group">
                     <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span></div>
                     <input class="form-control " placeholder="Search Here" type="text" [(ngModel)]="searchString">
                  </div>
               </div>

               <button class="btn  btn-warning float-right mb-2 hide" styleSheetFile="assets/css/custom_table.css" printSectionId="print" ngxPrint *ngIf="records?.length != 0">Export/Print</button>

               <table class="wikitable" [mfData]="records" #mf="mfDataTable"  [mfRowsOnPage]="10" width="100%">
               <thead>
               <tr>        
                  
                     <th>#</th>
                     <th>
                     <mfDefaultSorter by="creator.first_name">Entrepreneur</mfDefaultSorter>
                     </th>
                     <th>
                     <mfDefaultSorter by="organization_name">Enterprise</mfDefaultSorter>
                     </th>
                     <th>
                        <mfDefaultSorter by="creator.email">Email</mfDefaultSorter>
                     </th>
                     <th>
                        <mfDefaultSorter by="contact_no">Contact</mfDefaultSorter>
                     </th>
                     <th>
                     <mfDefaultSorter by="country">Country</mfDefaultSorter>
                     </th>
                     <th class="text-center">
                     <mfDefaultSorter by="status">Status</mfDefaultSorter>
                     </th>
                     <th class="text-center">
                        <mfDefaultSorter by="stage">Stage</mfDefaultSorter>
                     </th>
                     <th class="text-center" *ngIf="!is_dropped">
                        <mfDefaultSorter by="total_score">Evaluation Score</mfDefaultSorter>
                     </th>
                     <th class="text-center" *ngIf="is_dropped">
                        <mfDefaultSorter by="reasons.reason">Reason For Drop</mfDefaultSorter>
                     </th>
                     <th *ngxPermissionsOnly="['SUPER_ADMIN','SCREENER','MANAGER']" class="hide">
                        Action
                     </th>
               </tr>
               </thead>
               <tbody *ngIf="records?.length != 0">
               <tr *ngFor="let recordinstance of mf.data | filter : searchString; let i = index">            
                  <td>{{i + 1}}</td>
                  <td>{{ recordinstance.creator.first_name }} {{ recordinstance.creator.last_name }}</td>
                  <td>{{ recordinstance.organization_name }}</td>
                  <td>{{ recordinstance.creator.email }}</td>
                  <td>{{ recordinstance.contact_no }}</td>
                  <td>{{ recordinstance.country }}</td>
                  <td class="text-center">
                     <span class="badge badge-success" *ngIf="recordinstance.status == 'SUBMITTED'">
                        {{recordinstance.status}}
                     </span>
                     <span class="badge badge-danger" *ngIf="recordinstance.status == 'DROPPED'">
                        {{recordinstance.status}}
                     </span>
                     <span class="badge badge-primary" *ngIf="recordinstance.status !== 'SUBMITTED' && recordinstance.status !== 'DROPPED'">
                        {{recordinstance.status}}
                     </span>
                  </td>
                  <td class="text-center">{{ recordinstance.stage }}</td>
                  <td class="text-center" *ngIf="!is_dropped">{{ recordinstance.total_score }}</td>
                  <td *ngIf="is_dropped">{{ recordinstance.reasons.reason }}</td>
                  <td *ngxPermissionsOnly="['SUPER_ADMIN','MANAGER','SCREENER']" class="hide">
                     <button class="btn btn-success btn-small" (click)="application_review( recordinstance.creator.id)">View</button>
                  </td>
               </tr>
               </tbody>
               <tfoot>
               <tr class="hide">
                  <td colspan="12">
                     Select Records in a page : <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,100,1000,5000]"></mfBootstrapPaginator>
                  </td>
               </tr>
               </tfoot>
               <tbody *ngIf="records?.length == 0">
               <tr>
                  <td colspan="9" class="no-data-available">No data available</td>
               </tr>
               <tbody>
               </table>
         </div>        
      </div>
    </div>
</div>
  